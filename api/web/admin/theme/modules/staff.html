<!-- BEGIN PAGE HEADER-->
<h3 class="page-title">员工管理</h3>

<div class="page-bar">
	
	<ul class="page-breadcrumb">
						<li>
<i class="fa fa-plus-square"></i>
<a href="javascript:;" onclick="Staff.new()">新员工</a>
						</li>
						
						<li>
<i class="fa fa-cloud-upload"></i>
<a href="javascript:;" onclick="Staff.import()">员工导入
	
	</a>
						</li>

						<li>
<i class="fa fa-cloud-upload"></i>
<a href="javascript:;" onclick="Staff.showDeptTree()">按部门查询
	</a>
						</li>
	</ul>
	
</div>

<!-- 按部门查询树 开始 -->
	
<div class="col-md-6" style="border:1px solid #eee;padding-left: 0px;
    padding-right: 0px;display:none;
 	margin-left: 140px;margin-top: -21px;position: absolute;background-color: white;width: 300px;z-index: 99;" id="dept-div">
					<!-- BEGIN SAMPLE TABLE PORTLET-->
					<div class="portlet box green" style="margin-bottom: 0px;">
						<div class="portlet-title" style="min-height:0px;height:20px;">
							
							<div class="tools">
								<a href="javascript:;" class="close" onclick="Staff.closeDetpTree()" >
								</a>
							</div>
						</div>
						<div class="portlet-body" style="padding-top:0px;">
							<div class="table-scrollable" style="border: 0px;">
								<div id="depttreeQ" class="ztree scroller" style="max-height: 300px;overflow: auto;" data-always-visible="1" data-rail-
							</div>

							
						</div>
						
						</div>
					</div>

					<!-- END SAMPLE TABLE PORTLET-->
	</div>
</div>
	
<!-- 按部门查询树 结束 -->


<!-- END PAGE HEADER-->
<div class="clearfix"></div>

<div id="exstaff-dlg" class="portlet box green hide">
			<div class="portlet-title">
				<div class="caption">
					<i class="fa fa-gift"></i>员工信息-导入
				</div>
				<div class="tools">
					<a title="" data-original-title="" href="javascript:;" class="remove">
					</a>
				</div>
			</div>
			<div class="portlet-body form">
				<!-- BEGIN FORM-->
				<form enctype="multipart/form-data" method="post" action="" class="form-horizontal" id="formdata1">
					<div class="form-body">
						<div style="display: none;" class="alert alert-danger display-hide">
							<button class="close" data-close="alert"></button>
							<label></label>
						</div>
						<div style="display: none;" class="alert alert-success display-hide">
							<button class="close" data-close="alert"></button>
							<label></label>
						</div>				
					</div>
					<div class="fileupload-buttonbar portlet light">
						<div class="note note-danger">
									<p>
										导入的员工数据文件只支持excel2003和excel2007格式。<br>如你是第一次导入，请下载数据模板[<a href="../../EN_Employee_Template.xls">点击下载</a>]并严格按模板格式及要求填写！
									</p>
						</div>
						<div>
											<!-- The fileinput-button span is used to style the file input field as button -->
											<span class="btn green fileinput-button">
												<i class="fa fa-plus"></i>
												<span>选择文件... </span>
												<input type="file" multiple="" name="filedata" id="filedata">
											</span>
						</div>
						<div class="form-group form-md-line-input has-success">
							<div class="col-md-12">
								<input type="text" readonly="" style="color: #ccc" placeholder="请选择数据文件" id="file_metadata" class="form-control">
							</div>
						</div>
						<div style="display:none" class="col-md-12 form-group form-md-line-input has-success">
							<input type="text" readonly="" class="form-control" id="imping">
						</div>
					</div>
					<div class="form-actions">
						<div class="row">
							<div class="col-md-offset-3 col-md-9">
								<button type="button" disabled="" id="btn_file_upload"  class="btn blue">确定上传</button>
								<button onclick="$('#expstaff-form').remove()" type="button" id="btn_cancel" class="btn default">取消</button>
							</div>
						</div>
					</div>
				</form>
				<!-- END FORM-->
			</div>
</div>


<div class="row">
	<div class=" col-md-12 tab-content">
		
		<div class="table-responsive">
				<table class="table table-striped table-bordered table-advance table-hover" id="staffList">
				<thead>
				<tr>
					<th>
						 用户账号
					</th>
					<th>
						 昵称
					</th>
					<th>
						 所属部门
					</th>
					<th>
						 职务
					</th>
					<th>
						 手机号
					</th>
					<th>
						 数据操作
					</th>
				
				</tr>
				</thead>
				<tbody>
				
				
				</tbody>
				</table>
		</div>
		
		
		
	<div id="Pagination">
        </div>



<div class="portlet box green hide" id="newstaff-dlg">
			<div class="portlet-title">
				<div class="caption">
					<i class="fa fa-gift"></i>新员工信息
				</div>
				<div class="tools">
					<a class="remove" href="javascript:;" data-original-title="" title="">
					</a>
				</div>
			</div>
			<div class="portlet-body form">
				<!-- BEGIN FORM-->
				<form class="form-horizontal" action="#" id="staffForm">
					<div class="form-body">
						
						<div class="alert alert-danger display-hide" style="display: none;">
							<button data-close="alert" class="close"></button>
							<label></label>
						</div>
						
						<div class="alert alert-success display-hide" style="display: none;">
							<button data-close="alert" class="close"></button>
							<label></label>
						</div>
						
						<div class="form-group">
							<label class="col-md-3 control-label">姓名<span class="required" aria-required="true">* </span></label>
							<div class="col-md-4">
								<input type="text" id="realName" name="realName" placeholder="请输入" class="form-control">			
							</div>
						</div>					
						<div class="form-group">
							<label class="col-md-3 control-label">所属部门<span class="required" aria-required="true">
											* </span></label>
							<div class="col-md-4">
								<input type="text"  readonly="readonly" id="dept" name="dept" placeholder="请选择" class="form-control">		
								<div id="depttree" linkinput="dept" class="ztree scroller" style="max-height: 300px; overflow: auto;border:1px solid #eee" data-always-visible="1" data-rail-visible="0"></div>	
							</div>
						</div>
						<div class="form-group">
							<label class="col-md-3 control-label">邮箱<span class="required" aria-required="true">
											* </span></label>
							<div class="col-md-4">
								<div class="input-group">
									<span class="input-group-addon">
									<i class="fa fa-envelope"></i>
									</span>
									<input type="email" id="account" name="account" placeholder="邮箱地址" class="form-control">
								</div>
								<span class="help-block">可做帐号登录企业微信. </span>
							</div>
						</div>
						<div class="form-group">
							<label class="col-md-3 control-label">手机号码</label>
							<div class="col-md-4">
								<div class="input-group">
									<span class="input-group-addon">
									<i class="fa fa-mobile " style="font-size: 24px"></i>
									</span>
									<input type="text" id="mobile" name="mobile" placeholder="请输入" class="form-control">
								</div>
								<span class="help-block">可做帐号登录企业微信. </span>
							</div>
						</div>
						<div class="form-group">
							<label class="col-md-3 control-label">登录密码<span class="required" aria-required="true">
											* </span></label>
							<div class="col-md-4">
								<div class="input-group">
									<input type="password" id="password" name="password" placeholder="请输入" class="form-control">
									<span class="input-group-addon">
									<i class="fa fa-user"></i>
									</span>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label class="col-md-3 control-label">职务</label>
							<div class="col-md-4">
								<input type="text" id="duty" name="duty" placeholder="请输入" class="form-control">			
							</div>
						</div>
						<div class="form-group">
							<label class="col-md-3 control-label">性别</label>
							<div style="padding-top:7px;">
								&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" value="男" name="sex">男&nbsp;&nbsp;&nbsp;&nbsp;
								<input type="radio" value="女"  name="sex"  >女
								</div>
								
							
								<!--
								<div data-error-container="#form_2_membership_error" class="radio-list">
													<label>
													<div class="radio"><span><input type="radio" value="1" checked name="sex"></span></div>
													男 </label>
													<label>
													<div class="radio"><span><input type="radio" value="2" name="sex"></span></div>
													女 </label>
												</div>
												<div id="form_2_membership_error">
												</div>
								</div>
								-->
								
								
						</div>
					</div>
					<div class="form-actions">
						<div class="row">
							<div class="col-md-offset-3 col-md-9">
								<button class="btn blue" type="button" onclick="Staff.save()">保存</button>
								<button class="btn default" type="button" onclick="$('#newstaff-form').remove()">取消</button>
							</div>
						</div>
					</div>
				</form>
				<!-- END FORM-->
			</div>
</div>	
<script src="jscript/staff.js" type="text/javascript"></script>
<script>
$(document).ready(function() {
	Staff.init({});
});
</script>

<script type="text/html" id="stafflist-tmpl">
	{{each data}}
	
	<tr style="vertical-align:middle;">
					<td>
					{{if $value.photo_path==""}}
						<img style="width:45px;height:45px;" src="../assets/admin/pages/media/profile/avatar.png">
						{{else}}
							<img style="width:45px;height:45px;" src="{{$value.photo_path}}">
						
						{{/if}}
					
						{{$value.login_account}}
					</td>
					<td style="vertical-align:middle;" class='fafa_webim_ocs_presence' account='{{$value.login_account}}'>
						 {{$value.nick_name}}
					</td>
					<td style="vertical-align:middle;">
						 {{$value.dept_name}}
					</td>
					<td style="vertical-align:middle;">
						 {{$value.duty}}
					</td>
					<td style="vertical-align:middle;">
						 {{$value.mobile}}
					</td>
					<td style="vertical-align:middle;">
						<a href="javascript:;" class="btn purple-plum" onclick="Staff.editForm(this,'{{$value.login_account}}')" > 编辑 </a>
				
						<a href="javascript:;" class="btn default" onclick="Staff.del(this,'{{$value.login_account}}')"> 删除 </a>
					</td>
					
					
				</tr>				
				
				
			
			{{/each}}
	</script>